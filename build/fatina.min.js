// [Fatina]  Build: 3.0.0-beta.1 - Sunday, March 10th, 2019, 9:19:28 PM  
 (function(){'use strict';(function(c,d){"object"===typeof exports&&"object"===typeof module?module.exports=d():"function"===typeof define&&define.amd?define("Fatina",[],d):"object"===typeof exports?exports.Fatina=d():c.Fatina=d().default})("undefined"!==typeof self?self:this,function(){return function(c){function d(f){if(e[f])return e[f].exports;var b=e[f]={i:f,l:!1,exports:{}};c[f].call(b.exports,b,b.exports,d);b.l=!0;return b.exports}var e={};d.m=c;d.c=e;d.d=function(f,b,c){d.o(f,b)||Object.defineProperty(f,b,{enumerable:!0,
get:c})};d.r=function(d){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})};d.t=function(c,b){b&1&&(c=d(c));if(b&8||b&4&&"object"===typeof c&&c&&c.__esModule)return c;var f=Object.create(null);d.r(f);Object.defineProperty(f,"default",{enumerable:!0,value:c});if(b&2&&"string"!=typeof c)for(var a in c)d.d(f,a,function(a){return c[a]}.bind(null,a));return f};d.n=function(c){var b=c&&c.__esModule?
function(){return c["default"]}:function(){return c};d.d(b,"a",b);return b};d.o=function(c,b){return Object.prototype.hasOwnProperty.call(c,b)};d.p="";return d(d.s=4)}([function(c,d,e){Object.defineProperty(d,"__esModule",{value:!0});class f{constructor(){this.events={};this.duration=this.elapsed=0;this.timescale=1;this.state=0;this.first=!0}get isIdle(){return 0===this.state}get isRunning(){return 1===this.state}get isFinished(){return 3<=this.state}get isPaused(){return 2===this.state}start(){if(0!==
this.state)return this;this.first?this.validate():this.check();this.state=1;this.parent.addTick(this.tickCb);this.first&&(this.emitEvent(this.events.start),this.first=!1);return this}reset(b){this.state=0;b||this.removeParent();this.loop&&(this.loop.value=this.loop.original);this.loopInit();this.emitEvent(this.events.restart)}resetAndStart(b){this.loopInit();this.emitEvent(this.events.restart);this.state=1;0<b&&this.tickCb(b)}setParent(b){this.removeParent();this.parent=b;return this}setTimescale(b){this.timescale=
b;return this}pause(){1!==this.state?this.info(1,"Cannot pause this tween ",this.state):(this.state=2,this.removeParent())}resume(){2!==this.state?this.info(1,"Cannot resume this tween ",this.state):(this.state=1,this.parent.addTick(this.tickCb))}skip(b){3<=this.state?this.info(1,"Cannot skip this tween ",this.state):(0===this.state&&this.emitEvent(this.events.start),b?this.tickCb(this.duration-this.elapsed+(this.yo?this.yo.value*this.duration:0)):(this.elapsed=this.duration,this.complete()))}kill(){4===
this.state?this.info(1,"Cannot kill this tween ",this.state):(this.state=4,this.removeParent(),this.emitEvent(this.events.kill))}setLoop(b){this.loop||(this.loop={original:1,value:1});this.loop.original=Math.round(b);this.loop.value=this.loop.original;return this}setSettings(b){this.settings?Object.assign(this.settings,b):this.settings=b;return this}complete(){3<=this.state?this.info(1,"Cannot complete this tween ",this.state):(this.state=3,this.removeParent(),this.emitEvent(this.events.complete))}removeParent(){this.parent&&
this.parent.removeTick(this.tickCb)}check(){}validate(){}loopInit(){this.elapsed=0}info(b,c,a){!this.settings||b>this.settings.logLevel||console.log(c,a)}emit(b,c){if(this.settings&&!this.settings.safe)return b.apply(this,c);try{b.apply(this,c)}catch(a){console.warn(a)}}emitEvent(b,c){if(b)if(b instanceof Array)for(const a of b)this.emit(a,c);else this.emit(b,c)}onStart(b){return this.onEvent("start",b)}onRestart(b){return this.onEvent("restart",b)}onUpdate(b){return this.onEvent("update",b)}onKilled(b){return this.onEvent("kill",
b)}onComplete(b){return this.onEvent("complete",b)}onEvent(b,c){this.events[b]?this.events[b]instanceof Array?this.events[b].push(c):this.events[b]=[this.events[b],c]:this.events[b]=c;return this}}d.BaseTween=f},function(c,d,e){Object.defineProperty(d,"__esModule",{value:!0});const f=Math.PI,b=Math.PI/2,g={linear:a=>a,inQuad:a=>a*a,outQuad:a=>2*a-a*a,inOutQuad:a=>.5>a?2*a*a:2*(2*a-a*a)-1,inCubic:a=>a*a*a,outCubic:a=>3*a-3*a*a+a*a*a,inOutCubic:a=>.5>a?4*a*a*a:4*(3*a-3*a*a+a*a*a)-3,inQuart:a=>a*a*a*
a,outQuart:a=>{const b=a*a;return 4*a-6*b+4*b*a-b*b},inOutQuart:a=>{if(.5>a)return 8*a*a*a*a;{const b=a*a;return 8*(4*a-6*b+4*b*a-b*b)-7}},inSine:a=>1===a?1:1-Math.cos(b*a),outSine:a=>Math.sin(b*a),inOutSine:a=>.5>a?(1-Math.cos(f*a))/2:(1+Math.sin(f*(a-.5)))/2,inCirc:a=>1-Math.sqrt(1-Math.pow(a,2)),outCirc:a=>Math.sqrt(1-Math.pow(1-a,2)),inOutCirc:a=>.5>a?(1-Math.sqrt(1-4*a*a))/2:(1+Math.sqrt(-3+8*a-4*a*a))/2,inQuint:a=>a*a*a*a*a,outQuint:a=>--a*a*a*a*a+1,InOutQuint:a=>{a*=2;return 1>a?.5*a*a*a*a*
a:.5*((a-=2)*a*a*a*a+2)},inExponential:a=>1===a?1:0===a?0:Math.pow(1024,a-1),outExponential:a=>1===a?1:1-Math.pow(2,-10*a),inOutExponential:a=>{if(0===a)return 0;if(1===a)return 1;a*=2;return 1>a?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)},inElastic:a=>0===a?0:-Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*Math.PI),outElastic:a=>1===a?1:Math.pow(2,-10*a)*Math.sin(5*(a-.1)*Math.PI)+1,inOutElastic:a=>{if(0===a)return 0;if(1===a)return 1;a*=2;return 1>a?-.5*Math.pow(2,10*(a-1))*Math.sin(5*(a-1.1)*
Math.PI):.5*Math.pow(2,-10*(a-1))*Math.sin(5*(a-1.1)*Math.PI)+1},inBack:a=>1===a?1:a*a*(2.70158*a-1.70158),outBack:a=>0===a?0:--a*a*(2.70158*a+1.70158)+1,inOutBack:a=>{a*=2;return 1>a?.5*a*a*(3.5949095*a-2.5949095):.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)},outBounce:a=>a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,inBounce:a=>1-g.outBounce(1-a),inOutBounce:a=>.5>a?.5*g.inBounce(2*a):.5*g.outBounce(2*a-1)+.5};d.easeNames=
g},function(c,d,e){Object.defineProperty(d,"__esModule",{value:!0});c=e(0);class f extends c.BaseTween{constructor(b){super();this.remains=0;this.duration=b;this.tickCb=this.tick.bind(this)}tick(b){for(this.remains=b*this.timescale;0<this.remains;){this.elapsed+=this.remains;b=Math.max(Math.min(this.elapsed/this.duration,1),0);this.events.update&&this.emitEvent(this.events.update,[this.remains,b]);if(this.elapsed<this.duration)break;this.remains=this.elapsed-this.duration;if(this.loop&&(this.loop.value--,
0!==this.loop.value)){this.resetAndStart(0);continue}this.complete();break}}}d.Delay=f},function(c,d,e){Object.defineProperty(d,"__esModule",{value:!0});c=e(0);const f=e(8),b=e(2);class g extends c.BaseTween{constructor(a){super();this.evtTick=new Set;this.tweens=[];this.remains=this.index=0;this.tickCb=this.tick.bind(this);if(a){this.tweens=Array(a.length);for(let b=0;b<a.length;b++)a[b].setParent(this),this.tweens[b]=[a[b]]}}get count(){return this.tweens.length}loopInit(){this.index=0;for(const a of this.tweens)for(const b of a)b.reset()}addTick(a){this.evtTick.add(a)}removeTick(a){this.evtTick.delete(a)}tick(a){3<=
this.state||(this.remains=a*this.timescale,this.elapsed+=this.remains,this.localTick(this.remains))}localTick(a,b){this.cur||this.nextTween();this.cur&&(this.evtTick.forEach(function(b){b(a)}),!0!==b&&this.events.update&&this.emitEvent(this.events.update,[a,0]));this.remains=a;if(this.cur){for(const a of this.cur)if(3!==a.state)return;this.remains=this.cur[0].elapsed-this.cur[0].duration;this.events.stepEnd&&this.emitEvent(this.events.stepEnd,this.cur[0]);this.cur=void 0;this.index++;if(.01<this.remains){this.localTick(this.remains,
!0);return}}if(!this.cur&&this.tweens.length===this.index){if(this.loop&&(this.loop.value--,0!==this.loop.value)){this.resetAndStart(this.remains);return}this.complete()}}nextTween(){if(this.cur=this.tweens[this.index]){for(const a of this.cur)a.start();this.events.stepStart&&this.emitEvent(this.events.stepStart,this.cur[0])}}append(a){a.setParent(this);this.tweens[this.tweens.length]=[a];return this}appendCallback(a){a=new f.Callback(a);a.setParent(this);this.tweens[this.tweens.length]=[a];return this}appendInterval(a){a=
new b.Delay(a);a.setParent(this);this.tweens[this.tweens.length]=[a];return this}prepend(a){a.setParent(this);this.tweens.unshift([a]);return this}prependCallback(a){a=new f.Callback(a);a.setParent(this);this.tweens.unshift([a]);return this}prependInterval(a){a=new b.Delay(a);a.setParent(this);this.tweens.unshift([a]);return this}skip(a){if(3<=this.state)this.info(1,"Cannot skip this tween ",this.state);else{for(const b of this.tweens)for(const c of b)0===c.elapsed&&this.emitEvent(this.events.stepStart,
c),c.skip(a),this.emitEvent(this.events.stepEnd,c);super.skip()}}kill(){if(4===this.state)this.info(1,"Cannot kill this tween ",this.state);else{for(const a of this.tweens)for(const b of a)b.kill();super.kill()}}join(a){if(0===this.tweens.length)return this.append(a);a.setParent(this);this.tweens[this.tweens.length-1].push(a);return this}onStepStart(a){return this.onEvent("stepStart",a)}onStepEnd(a){return this.onEvent("stepEnd",a)}}d.Sequence=g},function(c,d,e){Object.defineProperty(d,"__esModule",
{value:!0});c=e(5);d.default=new c.Fatina;e=e(10);d.EasingType=e.EasingType},function(c,d,e){Object.defineProperty(d,"__esModule",{value:!0});const f=e(6),b=e(7),g=e(2),a=e(3),m=e(9);let h,k,n;"undefined"!==typeof window&&(k=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,n=window.cancelAnimationFrame||window.mozCancelAnimationFrame);class l{constructor(){this.plugin={};this.loadedPlugins=[];this.eventCreated=[];this.settings=
{logLevel:0,safe:!0,smooth:!1,maxFrameDt:50,maxFrameNumber:40,maxDt:500};this.version="3.0.0-beta.1";this.lastTime=this.dt=this.time=0;this.initialized=!1;this.pulse=(a,b)=>f.pulsePreset(this,a,b);this.scale=(a,b)=>f.scalePreset(this,a,b);this.wobble=(a,b)=>f.wobblePreset(this,a,b);this.sonar=(a,b)=>f.sonarPreset(this,a,b);this.shake=(a,b)=>f.shakePreset(this,a,b)}get elapsed(){return this.manager.elapsed}get mainTicker(){this.initialized||this.init();return this.manager}init(a){if(this.initialized)return!1;
this.manager||(this.manager=new b.Ticker,this.manager.start());"undefined"===typeof window||a||(h=k(this.updateLoop.bind(this)));console.log(" %c Fatina - Tweening library for games ("+this.version+") https://github.com/kefniark/Fatina ","background: #222; color: #9fbff4; padding: 5px");return this.initialized=!0}setTimescale(a){this.init();this.manager.setTimescale(a)}pause(){this.init();this.manager.pause()}resume(){this.init();this.manager.resume()}destroy(){this.manager&&this.manager.kill();h&&
n(h);this.initialized=!1}update(a){this.initialized&&this.manager&&(this.manager.tick(a),this.time+=a)}tween(a){a=new m.Tween(a);this.addContext(a);return a}sequence(b){b=new a.Sequence(b);this.addContext(b);return b}delay(a){a=new g.Delay(a);this.addContext(a);return a}setTimeout(a,b){a=(new g.Delay(b)).onComplete(a);this.addContext(a);return a.start()}setInterval(a,b){a=(new g.Delay(b)).onRestart(a).setLoop(-1);this.addContext(a);return a.start()}addContext(a){this.initialized||this.init();a.setParent(this.manager);
0===this.settings.logLevel&&this.settings.safe||a.setSettings(this.settings);this.emitCreated(a)}ticker(){this.initialized||this.init();const a=new b.Ticker,c=a.tick.bind(a);a.setParent(this.manager,c);this.manager.addTick(c);a.start();this.emitCreated(a);return a}updateLoop(a){this.dt+=a-this.lastTime;this.dt>this.settings.maxDt&&(console.warn(`dt too high ${Math.round(this.dt)}ms. , Capped to ${this.settings.maxDt}ms.`),this.dt=this.settings.maxDt);if(this.settings.smooth){let a=0;for(;0<this.dt&&
a<this.settings.maxFrameNumber;){const b=Math.min(this.dt,this.settings.maxFrameDt);this.update(b);this.dt-=b;a++}}else this.update(this.dt),this.dt=0;this.lastTime=a;h=k(this.updateLoop.bind(this))}loadPlugin(a){a.init(this);this.loadedPlugins.push(a);this.info(2,"Plugin Loaded",a.name)}info(a,b,c){a>this.settings.logLevel||(c?console.log(b,c):console.log(b))}emit(a,b){if(!this.settings.safe)return a(b);try{a(b)}catch(u){console.warn(u)}}emitCreated(a){for(const b of this.eventCreated)this.emit(b,
a)}addListenerCreated(a){this.eventCreated.push(a)}removeListenerCreated(a){a=this.eventCreated.indexOf(a);-1!==a&&this.eventCreated.splice(a,1)}setLog(a){this.settings.logLevel=a}setSafe(a){this.settings.safe=a}}d.Fatina=l},function(c,d,e){function f(a,b){b=b.split(".");for(let c=0;c<b.length-1;c++)a=a[b[c]];return a}function b(a){a=a.split(".");return a[a.length-1]}function g(a,c){const d={};d[b(a)]=c;return d}function a(a,c,d){const l=Object.assign({},{scaleX:"scale.x",scaleY:"scale.y",amplitude:.5,
duration:2E3,bounce:5,friction:2,sinX:0},d||{}),e=f(c,l.scaleX),h=b(l.scaleX),g=b(l.scaleY);var m=e[h],k=e[g];return a.tween({}).to({},l.duration).setEasing("inOutCubic").onUpdate((a,b)=>{a=Math.pow(1-b,l.friction);b=b*l.bounce%l.duration;e[h]=m+Math.sin(l.sinX+b*Math.PI*2)*l.amplitude*a;e[g]=k+Math.sin(b*Math.PI*2)*l.amplitude*a}).onKilled(()=>{e[h]=m;e[g]=k})}Object.defineProperty(d,"__esModule",{value:!0});const m=e(1);d.sonarPreset=function(a,c,d){const e=Object.assign({},{alpha:"alpha",scaleX:"scale.x",
scaleY:"scale.y",amplitude:4,duration:2E3},d||{}),h=f(c,e.scaleX),g=f(c,e.alpha),k=b(e.scaleX),n=b(e.scaleY),r=b(e.alpha);var p=h[k],q=h[n];const t=m.easeNames.outCubic;return a.tween({}).to({},e.duration).onUpdate((a,b)=>{g[r]=1-m.easeNames.inSine(b);h[k]=p+e.amplitude*t(b);h[n]=q+e.amplitude*t(b)}).onKilled(()=>{g[r]=1;h[k]=p;h[n]=q})};d.pulsePreset=function(a,c,d){const e=Object.assign({},{alpha:"alpha",duration:2E3},d||{}),h=f(c,e.alpha);return a.tween(h).to(g(e.alpha,0),e.duration/2).setEasing("inOutQuad").toSequence().append(a.tween(h).to(g(e.alpha,
1),e.duration/2).setEasing("inOutQuad")).onKilled(()=>h[b(e.alpha)]=1)};d.scalePreset=a;d.wobblePreset=function(b,c,d){return a(b,c,Object.assign({},{sinX:Math.PI},d||{}))};d.shakePreset=function(a,c,d){const e=Object.assign({},{posX:"position.x",posY:"position.y",amplitude:1.5,duration:2E3,bounce:10,friction:2},d||{}),h=f(c,e.posX),g=b(e.posX),m=b(e.posY);var k=h[g],n=h[m],p=.5+Math.random(),q=.5+Math.random();return a.tween({}).to({},e.duration).onUpdate((a,b)=>{a=Math.pow(1-b,e.friction);b=b*e.bounce%
e.duration;h[g]=k+Math.sin(Math.PI+(b+p)*Math.PI*2)*e.amplitude*a;h[m]=n+Math.sin((b+q)*Math.PI*2)*e.amplitude*a}).onKilled(()=>{h[g]=k;h[m]=n})}},function(c,d,e){Object.defineProperty(d,"__esModule",{value:!0});class f{constructor(){this.state=0;this.timescale=1;this.duration=this.elapsed=0;this.ticks=new Set;this.newTicks=new Set;this.dt=0}setParent(b,c){this.tickCb=c;this.parent=b}setTimescale(b){this.timescale=b}addTick(b){this.newTicks.add(b)}removeTick(b){this.ticks.delete(b)||this.newTicks.delete(b)}tick(b){1===
this.state&&(this.dt=b*this.timescale,0<this.newTicks.size&&(this.newTicks.forEach(b=>this.ticks.add(b)),this.newTicks.clear()),this.ticks.forEach(b=>b(this.dt)),this.elapsed+=this.dt)}start(){0===this.state&&(this.state=1)}pause(){1===this.state&&(this.state=2)}resume(){2===this.state&&(this.state=1)}kill(){3<=this.state||(this.parent&&this.tickCb&&this.parent.removeTick(this.tickCb),this.state=4)}skip(){}reset(){this.state=0}get isIdle(){return 0===this.state}get isRunning(){return 1===this.state}get isFinished(){return 3<=
this.state}get isPaused(){return 2===this.state}}d.Ticker=f},function(c,d,e){Object.defineProperty(d,"__esModule",{value:!0});c=e(0);class f extends c.BaseTween{constructor(b){super();this.callback=b;this.tickCb=this.tick.bind(this)}tick(b){this.elapsed+=b;this.duration=0;this.callback();this.emitEvent(this.events.update,[b,1]);this.complete()}}d.Callback=f},function(c,d,e){Object.defineProperty(d,"__esModule",{value:!0});const f=e(1);c=e(0);const b=e(3);class g extends c.BaseTween{constructor(a){super();
this.prop=[];this.steps=0;this.relative=!1;this.remains=this.v=this.p=0;this.obj=a;this.tickCb=this.tick.bind(this)}init(a){this.obj=a;this.prop.length=0}validate(){if(!this.obj)throw Error("undefined object");if(!this.parent)throw Error("no ticker");this.ease||(this.ease=f.easeNames.linear);this.check()}check(){this.cf||(this.cf={});this.ct||(this.ct={});for(const a of this.prop)this.f?(this.cf[a]=this.f[a],this.obj[a]=this.f[a]):this.cf[a]=this.obj[a],this.ct[a]=this.relative?this.obj[a]+this.t[a]:
this.t[a]}tick(a){if(!(3<=this.state))for(this.remains=a*this.timescale;0<this.remains;){this.elapsed+=this.remains;this.p=Math.max(Math.min(this.elapsed/this.duration,1),0);this.v=this.ease(this.p);this.yo&&1===(this.yo.original-this.yo.value)%2&&(this.v=1-this.ease(1-this.p));0!==this.steps&&(this.v=Math.round(this.v*this.steps)/this.steps);for(const a of this.prop)this.obj[a]=this.cf[a]+(this.ct[a]-this.cf[a])*this.v;this.events.update&&this.emitEvent(this.events.update,[this.remains,this.p]);
if(this.elapsed<this.duration)break;this.remains=this.elapsed-this.duration;if(this.yo&&0!==this.yo.value)this.reverse(),this.resetAndStart(0),this.yo.value--;else{if(this.loop&&(this.loop.value--,0!==this.loop.value)){this.check();this.resetAndStart(0);continue}this.complete();break}}}from(a){this.f=a;this.updateProp();return this}to(a,b){this.t=a;this.duration=b;this.updateProp();return this}updateProp(){if(this.obj){for(const a in this.t)this.t.hasOwnProperty(a)&&this.prop.push(a);this.prop.filter((a,
b,c)=>b===c.indexOf(a))}}setRelative(a){this.relative=a;return this}modify(a,b){for(const c of this.prop)a.hasOwnProperty(c)&&(this.obj[c]+=a[c],b?this.ct[c]+=a[c]:this.cf[c]+=a[c])}reset(a){if(this.yo){if(1===(this.yo.original-this.yo.value)%2){let a=this.cf;this.cf=this.ct;this.ct=a;a=this.f;this.f=this.t;this.t=a;this.elapsed=Math.round((1-this.elapsed/this.duration)*this.duration*1E3)/1E3}this.yo.value=this.yo.original}super.reset(a)}reverse(){let a=this.cf;this.cf=this.ct;this.ct=a;a=this.f;
this.f=this.t;this.t=a;this.elapsed=Math.round((1-this.elapsed/this.duration)*this.duration*1E3)/1E3;3===this.state&&(this.reset(!0),this.start())}yoyo(a){this.yo||(this.yo={original:0,value:0});this.yo.original=a;this.yo.value=a;return this}setSteps(a){this.steps=a;return this}toSequence(){if(!this.parent)throw Error("parent ticker not defined");return(new b.Sequence).setParent(this.parent).append(this)}setEasing(a){if(!(a in f.easeNames))throw Error(`unknown easing method ${a}`);this.ease=f.easeNames[a];
return this}loopInit(){this.elapsed=0}}d.Tween=g},function(c,d,e){Object.defineProperty(d,"__esModule",{value:!0});c=d.EasingType||(d.EasingType={});c.Linear="linear";c.InQuad="inQuad";c.OutQuad="outQuad";c.InOutQuad="inOutQuad";c.InCubic="inCubic";c.OutCubic="outCubic";c.InOutCubic="inOutCubic";c.InQuart="inQuart";c.OutQuart="outQuart";c.InOutQuart="inOutQuart";c.InSine="inSine";c.OutSine="outSine";c.InOutSine="inOutSine";c.InCirc="inCirc";c.OutCirc="outCirc";c.InOutCirc="inOutCirc";c.InQuint="inQuint";
c.OutQuint="outQuint";c.InOutQuint="inOutQuint";c.InExponential="inExponential";c.OutExponential="outExponential";c.InOutExponential="inOutExponential";c.InElastic="inElastic";c.OutElastic="outElastic";c.InOutElastic="inOutElastic";c.InBack="inBack";c.OutBack="outBack";c.InOutBack="inOutBack";c.InBounce="inBounce";c.OutBounce="outBounce";c.InOutBounce="inOutBounce"}])});}).call(this || window)
 